<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>StrataGEN - A random stratagem loadout generator for Helldivers</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #808080;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      min-height: 100vh;
      box-sizing: border-box;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5vw;
      width: 90vw;
      max-width: 1200px;
    }

    .grid div {
      background-color: gray;
      border-radius: 8px;
      overflow: hidden;
      aspect-ratio: 1 / 1;
      cursor: pointer;
      transition: outline 0.2s ease;
    }

    .grid img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      user-select: none;
      pointer-events: none;
      display: block;
    }

    .grid-element {
      border-width: 5px;
      border-style: solid;
      border-color: #FFE900;
      border-radius: 0;
    }

    .grid-element.locked {
      outline: 4px solid red;
    }

    button {
      margin-top: 20px;
      align-self: flex-end;
      padding: 0.7em 1.5em;
      font-size: 1.1rem;
      background-color: #FFE900;
      color: #000000;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      user-select: none;
    }

    button:hover {
      background-color: #ba6d00;
    }

    @media (max-width: 600px) {
      .grid {
        width: 100vw;
        gap: 1vw;
      }
      button {
        font-size: 1rem;
        padding: 0.6em 1.2em;
      }
    }
  </style>
</head>
<body>

  <div class="grid">
    <div class="grid-element" data-locked="false"><img src="" alt="" /></div>
    <div class="grid-element" data-locked="false"><img src="" alt="" /></div>
    <div class="grid-element" data-locked="false"><img src="" alt="" /></div>
    <div class="grid-element" data-locked="false"><img src="" alt="" /></div>
  </div>

  <button onclick="shuffleImages()">Shuffle Stratagems</button>

  <script>
    const gridElements = document.querySelectorAll('.grid-element');
    const imageElements = document.querySelectorAll('.grid img');
    const allImages = [
      'AM-23_EMS_Mortar_Sentry_Stratagem_Icon.png',
      'Anti-Materiel_Rifle_Stratagem_Icon.png',
      'Anti-Personnel_Minefield_Stratagem_Icon.png',
      'Arc_Thrower_Stratagem_Icon.png',
      'Autocannon_Sentry_Stratagem_Icon.png',
      'Autocannon_Stratagem_Icon.png',
      'A_FLAM-40_Flame_Sentry_Stratagem_Icon.png',
      'Ballistic_Shield_Backpack_Stratagem_Icon.png',
      'Commando_Stratagem_Icon.png',
      'CQC-1_One_True_Flag_Stratagem_Icon.png',
      'Eagle_110mm_Rocket_Pods_Stratagem_Icon.png',
      'Eagle_500kg_Bomb_Stratagem_Icon.png',
      'Eagle_Airstrike_Stratagem_Icon.png',
      'Eagle_Cluster_Bomb_Stratagem_Icon.png',
      'Eagle_Napalm_Airstrike_Stratagem_Icon.png',
      'Eagle_Smoke_Strike_Stratagem_Icon.png',
      'Eagle_Strafing_Run_Stratagem_Icon.png',
      'EXO-45_Patriot_Exosuit_Stratagem_Icon.png',
      'EXO-49_Emancipator_Exosuit_Stratagem_Icon.png',
      'Expendable_Anti-Tank_Stratagem_Icon.png',
      'E_AT-12_Anti-Tank_Emplacement_Stratagem_Icon.png',
      'Flamethrower_Stratagem_Icon.png',
      'Gas_Minefield_Stratagem_Icon.png',
      'Gatling_Sentry_Stratagem_Icon.png',
      'GL-21_Grenadier_Battlement_Stratagem_Icon.png',
      'Grenade_Launcher_Stratagem_Icon.png',
      'Guard_Dog_Dog_Breath_Stratagem_Icon.png',
      'Guard_Dog_Rover_Stratagem_Icon.png',
      'Guard_Dog_Stratagem_Icon.png',
      'Heavy_Machine_Gun_Stratagem_Icon.png',
      'HMG_Emplacement_Stratagem_Icon.png',
      'Hover_Pack_Stratagem_Icon.png',
      'Incendiary_Mines_Stratagem_Icon.png',
      'Jump_Pack_Stratagem_Icon.png',
      'Laser_Cannon_Stratagem_Icon.png',
      'M-102_Fast_Recon_Vehicle_Stratagem_Icon.png',
      'Machine_Gun_Sentry_Stratagem_Icon.png',
      'Machine_Gun_Stratagem_Icon.png',
      'MD-17_Anti-Tank_Mines_Stratagem_Icon.png',
      'Mortar_Sentry_Stratagem_Icon.png',
      'Orbital_120mm_HE_Barrage_Stratagem_Icon.png',
      'Orbital_380mm_HE_Barrage_Stratagem_Icon.png',
      'Orbital_Airburst_Strike_Stratagem_Icon.png',
      'Orbital_EMS_Strike_Stratagem_Icon.png',
      'Orbital_Gas_Strike_Stratagem_Icon.png',
      'Orbital_Gatling_Barrage_Stratagem_Icon.png',
      'Orbital_Laser_Stratagem_Icon.png',
      'Orbital_Napalm_Barrage_Stratagem_Icon.png',
      'Orbital_Precision_Strike_Stratagem_Icon.png',
      'Orbital_Railcannon_Strike_Stratagem_Icon.png',
      'Orbital_Smoke_Strike_Stratagem_Icon.png',
      'Orbital_Walking_Barrage_Stratagem_Icon.png',
      'Portable_Hellbomb_Stratagem_Icon.png',
      'Quasar_Cannon_Stratagem_Icon.png',
      'Railgun_Stratagem_Icon.png',
      'Recoilless_Rifle_Stratagem_Icon.png',
      'RL-77_Airburst_Rocket_Launcher_Stratagem_Icon.png',
      'Rocket_Sentry_Stratagem_Icon.png',
      'SH-51_Directional_Shield_Stratagem_Icon.png',
      'Shield_Generator_Pack_Stratagem_Icon.png',
      'Shield_Generator_Relay_Stratagem_Icon.png',
      'Spear_Stratagem_Icon.png',
      'StA-X3_W.A.S.P._Launcher_Stratagem_Icon.png',
      'Stalwart_Stratagem_Icon.png',
      'Sterilizer_Stratagem_Icon.png',
      'Supply_Pack_Stratagem_Icon.png',
      'Tesla_Tower_Stratagem_Icon.png'
    ];

    // Toggle lock state on click
    gridElements.forEach((el, idx) => {
      el.addEventListener('click', () => {
        const img = el.querySelector('img');
        if (img.src && img.src !== window.location.href) {
          const locked = el.getAttribute('data-locked') === 'true';
          el.setAttribute('data-locked', (!locked).toString());
          el.classList.toggle('locked');
        }
      });
    });

    function getRandomImages(arr, count) {
      const shuffled = [...arr].sort(() => 0.5 - Math.random());
      return shuffled.slice(0, count);
    }

    function shuffleImages() {
      const lockedImages = new Set();
      gridElements.forEach((el, idx) => {
        if (el.getAttribute('data-locked') === 'true') {
          const imgSrc = imageElements[idx].src.split('/').pop();
          if (imgSrc) lockedImages.add(imgSrc);
        }
      });

      const unlockedIndices = [];
      gridElements.forEach((el, idx) => {
        if (el.getAttribute('data-locked') !== 'true') {
          unlockedIndices.push(idx);
        }
      });

      const availableImages = allImages.filter(img => !lockedImages.has(img));
      const selected = getRandomImages(availableImages, unlockedIndices.length);

      unlockedIndices.forEach((idx, i) => {
        imageElements[idx].src = `stratagems/${selected[i]}`;
      });
    }

    window.onload = () => {
      shuffleImages();
    };
  </script>
</body>
</html>
